# Налаштування автентифікації з Логіном/Паролем

Тепер додаток використовує **Логін/Пароль** замість Email/Пароль.

## Що змінилось

1. **Форми входу і реєстрації** - тепер запитують Логін замість Email
2. **Username формат** - 3-20 символів: літери, цифри, `_` або `-`
3. **Внутрішньо** - username конвертується в `username@local.app` для Supabase

## Налаштування Supabase

### 1. Якщо у вас нова БД (без користувачів):

Виконайте `supabase-auth-schema.sql` в Supabase SQL Editor.

### 2. Якщо у вас вже є користувачі:

Виконайте `supabase-auth-migration.sql` в Supabase SQL Editor.

### 3. Вимкніть Email Confirmation (важливо!)

Оскільки ми використовуємо фейкові email (`username@local.app`), потрібно вимкнути підтвердження email:

1. Відкрийте Supabase Dashboard
2. Перейдіть до **Authentication** → **Providers** → **Email**
3. Знайдіть **"Confirm email"**
4. **Вимкніть** цю опцію
5. Натисніть **Save**

### 4. Опціонально: налаштуйте мінімальну довжину паролю

1. В тому ж розділі **Authentication** → **Providers** → **Email**
2. Знайдіть **"Minimum password length"**
3. Встановіть `6` (або інше значення)
4. Натисніть **Save**

## Як працює

### Реєстрація
```
Користувач вводить: username="myuser", password="123456"
Supabase отримує: email="myuser@local.app", password="123456"
В metadata: { username: "myuser" }
```

### Вхід
```
Користувач вводить: username="myuser", password="123456"
Додаток конвертує: email="myuser@local.app", password="123456"
Supabase перевіряє: чи існує такий email+password
```

### Відображення
```
В інтерфейсі показується: "myuser" (без @local.app)
```

## Тестування

1. Відкрийте http://localhost:8000
2. Натисніть "Зареєструватися"
3. Введіть:
   - Логін: `testuser`
   - Ім'я: `Тестовий Користувач` (необов'язково)
   - Пароль: `123456`
   - Підтвердження: `123456`
4. Натисніть "Зареєструватися"
5. Увійдіть з логіном `testuser` та паролем `123456`

## Важливо!

- Username **чутливий до регістру** (myuser ≠ MyUser)
- Username **унікальний** - не можна створити двох користувачів з однаковим логіном
- Якщо хочете дозволити email замість username, можна додати перевірку: якщо input містить `@`, використовувати як email
